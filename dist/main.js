(()=>{"use strict";const t=[];class e{constructor(t){this.title=t}setProjectList(e){t.unshift(e),console.log(t)}removeProjectList(e){t.splice(e,1),console.log(t)}}const n=JSON.parse(localStorage.getItem("tasks"))||[];class i{constructor(t,e,n,i){this.title=t,this.description=e,this.date=n,this.priority=i}setTaskList(t,e,i,s){n.unshift({title:t,description:e,date:i,priority:s}),localStorage.setItem("tasks",JSON.stringify(n))}removeTaskList(t){n.splice(t,1),JSON.parse(localStorage.getItem("tasks")).splice(t,1)}updateTaskList(t,e,i,s,o){n[o].title=t,n[o].description=e,n[o].date=i,n[o].priority=s}}function s(){const t=JSON.parse(localStorage.getItem("tasks"));console.log("fuck",t);for(let e=0;e<t.length;e++){console.log("i",e);const n=document.querySelector(".task-list-container"),i=document.createElement("div");i.classList.add("task-list");const s=document.createElement("div");s.classList.add("visible-task-info");const o=document.createElement("div");o.classList.add("task-left");const a=document.createElement("span");a.classList.add("task-title"),a.textContent=t[e].title;const l=document.createElement("div");l.classList.add("task-list-controller");const c=document.createElement("button");c.classList.add("task-edit-button"),c.innerHTML='<i class= "fa-solid fa-pencil"></i>';const d=document.createElement("button");d.innerHTML='<i class="fa-solid fa-flag"></i>',d.classList.add("task-priority-button"),"Low"===t[e].priority?d.style.color="green":"Medium"===t[e].priority?d.style.color="orange":"High"===t[e].priority&&(d.style.color="red");const r=document.createElement("button");r.classList.add("task-delete-button"),r.innerHTML='<i class= "fa-solid fa-trash"></i>';const u=document.createElement("div");u.classList.add("hidden-task");const m=document.createElement("div");m.classList.add("hidden-task-info");const p=document.createElement("div");p.classList.add("task-left-column");const v=document.createElement("div");function f(){const n=document.createElement("div");n.classList.add("task-title-info");const i=document.createElement("span");i.style.fontWeight="bold",i.textContent="Title: ";const s=document.createElement("span");return s.classList.add("task-title"),s.textContent=t[e].title,n.appendChild(i),n.appendChild(s),n}function y(){const n=document.createElement("div");n.classList.add("task-date-info");const i=document.createElement("span");i.style.fontWeight="bold",i.textContent="Date: ";const s=document.createElement("span");return s.classList.add("task-date"),s.textContent=t[e].date,n.appendChild(i),n.appendChild(s),n}function k(){const n=document.createElement("div");n.classList.add("task-description-info");const i=document.createElement("span");i.style.fontWeight="bold",i.textContent="Description: ";const s=document.createElement("span");return s.classList.add("task-description"),s.textContent=t[e].description,n.appendChild(i),n.appendChild(s),n}function L(){const n=document.createElement("div");n.classList.add("task-priority-info");const i=document.createElement("span");i.style.fontWeight="bold",i.textContent="Priority: ";const s=document.createElement("span");return s.classList.add("task-priority"),s.textContent=t[e].priority,n.appendChild(i),n.appendChild(s),n}v.classList.add("task-right-column"),o.appendChild(a),l.append(c,d,r),s.append(o,l),u.appendChild(m),m.append(p,v),p.append(f(),y()),v.append(k(),L()),i.append(s,u),n.appendChild(i),console.log("t",n.childElementCount),console.log(t.length)}}function o(){return document.getElementById("project-title-input")}localStorage.getItem("tasks")&&s(),function(){const t=document.querySelector("main"),n=document.querySelector(".container"),a=document.querySelector(".project-container"),l=document.querySelector(".task-list-container"),c=document.querySelector(".add-project-button"),d=document.querySelector(".add-task-button");let r=!1,u=!1,m=!1,p=!1;function v(){const e=document.createElement("div");return e.classList.add("error-message"),{emptyMessage:function(){e.textContent="Project title cannot be empty",t.appendChild(e)},lengthyMessage:function(){e.textContent="Project title cannot be longer than 12 characters",t.appendChild(e)}}}function f(){const e=document.querySelector(".error-message");t.removeChild(e)}function y(){return{titleField:document.getElementById("task-title"),descriptionField:document.getElementById("task-description"),dateField:document.getElementById("task-date"),priorityField:document.getElementById("task-priority")}}function k(t){return{taskTitle:x(t.target,4).querySelector(".task-title"),secondTaskName:x(t.target,4).querySelector(".hidden-task-info .task-title"),taskDescription:x(t.target,4).querySelector(".task-description"),taskDate:x(t.target,4).querySelector(".task-date"),taskPriority:x(t.target,4).querySelector(".task-priority")}}function L(t){document.querySelector("main").appendChild(function(){const t=document.createElement("div");return t.classList.add("popup-field"),t.innerHTML='<form class="edit-form">\n    <fieldset>\n        <div class="column-one">\n            <div class="form-element title">\n                <label for="task-title">Title</label>\n                <input id="task-title" autocomplete = "off">\n            </div>\n\n            <div class="form-element description">\n                <label for="task-description">Description</label>\n                <textarea id="task-description"></textarea>\n            </div>\n        </div>\n\n        <div class="column-two">\n            <div class="form-element date">\n                <label for="task-date">Due Date</label>\n                <input id="task-date" type="date">\n            </div>\n\n            <div class="form-element priority">\n                <label for="task-priority">Priority</label>\n                <select id="task-priority">\n                    <option>Low</option>\n                    <option>Medium</option>\n                    <option>High</option>\n                </select>\n            </div>\n        </div>\n\n    </fieldset>\n    <div class="form-button">\n        <button class="cancelButton">Cancel</button>\n        <button class="updateButton">Update Task</button>\n    </div>\n</form>',t}()),function(t){const e=document.querySelector(".updateButton"),n=y().titleField,s=y().descriptionField,o=y().dateField,a=y().priorityField,l=k(t).taskTitle,c=k(t).secondTaskName,d=k(t).taskDescription,r=k(t).taskDate,u=k(t).taskPriority,m=Array.from(document.querySelectorAll(".task-list-container .task-list")).indexOf(x(t.target,4)),p=x(t.target,2).querySelector(".task-priority-button");e.addEventListener("click",(t=>{t.preventDefault(),""!==n.value&&""!==s.value&&""!==o.value?(l.textContent=n.value,c.textContent=n.value,d.textContent=s.value,r.textContent=o.value,u.textContent=a.value,console.log(o.value),"Low"===a.value?p.style.color="green":"Medium"===a.value?p.style.color="orange":p.style.color="red",(new i).updateTaskList(l.textContent,d.textContent,r.textContent,u.textContent,m),h()):b()}))}(t),q(),function(t){y().titleField.value=x(t.target,4).querySelector(".task-title").textContent,y().descriptionField.value=x(t.target,4).querySelector(".task-description").textContent,y().dateField.value=x(t.target,4).querySelector(".task-date").textContent,y().priorityField.value=x(t.target,4).querySelector(".task-priority").textContent,m=!0,t.stopPropagation()}(t)}function g(t){let n,s;function o(){const t=document.querySelectorAll(".task-list-container > .task-list"),e=[].indexOf.call(t,n);(new i).removeTaskList(e),l.removeChild(n)}function a(){const t=document.querySelectorAll(".project-list > .project-name"),n=document.querySelector(".project-list"),i=[].indexOf.call(t,s);(new e).removeProjectList(i),n.removeChild(s)}t.target.classList.contains("fa-trash")?(n=x(t.target,5),o()):t.target.classList.contains("task-delete-button")&&(n=x(t.target,4),o()),t.target.classList.contains("fa-times")?(s=x(t.target,4),a()):t.target.classList.contains("delete-project-button")&&(s=x(t.target,3),a()),t.stopPropagation()}function h(){if(r){const t=document.querySelector(".project-form");r=!1,t.removeEventListener("keydown",S),c.classList.remove("hide"),a.removeChild(t)}if(u||m){const t=document.querySelector("main"),e=document.querySelector(".popup-field");u=!1,m=!1,t.removeChild(e)}}function E(){const t=document.getElementById("project-title-input");return""===t.value?(o().classList.add("invalid"),v().emptyMessage(),setTimeout(f,3e3),void o().addEventListener("input",(()=>{""===o().value?o().classList.add("invalid"):""!==o().value&&o().classList.remove("invalid")}))):t.value.length>12?(v().lengthyMessage(),setTimeout(f,3e3),o().addEventListener("input",(()=>{o().value.length<=12?o().classList.remove("invalid"):o().value.length>12&&o().classList.add("invalid")})),void o().classList.add("invalid")):(function(){const t=document.getElementById("project-title-input"),n=document.querySelector(".project-list"),i=document.querySelector(".project-container"),s=document.createElement("button");s.classList.add("project-name");const o=document.createElement("div");o.classList.add("project-left-side");const a=document.createElement("span");a.innerHTML="<i class = 'fa-solid fa-tasks'></i>";const l=document.createElement("p");l.textContent=function(){const n=new e(t.value);return n.setProjectList(n.title),n.title}();const c=document.createElement("div");c.classList.add("project-right-side"),c.innerHTML="<button class = 'delete-project-button'><i class = 'fa-solid fa-times'></i></button>",o.appendChild(a),o.appendChild(l),s.appendChild(o),s.appendChild(c),n.querySelector(".project-name")?n.insertBefore(s,n.firstChild):n.appendChild(s),i.appendChild(n)}(),void h())}function b(){const t=document.querySelectorAll(".form-element"),e=document.getElementById("task-title"),n=document.getElementById("task-description"),i=document.getElementById("task-date"),s=document.createElement("span"),o=document.createElement("span"),a=document.createElement("span");""===e.value&&(t.forEach((t=>{if(t.classList.contains("title")){if(t.querySelector(".invalid-message"))return;s.textContent="Task title is required",s.classList.add("invalid-message"),e.after(s),e.classList.add("invalid")}})),e.addEventListener("input",(()=>{""===e.value?(e.classList.add("invalid"),t.forEach((t=>{if(t.classList.contains("title")){if(t.querySelector(".invalid-message"))return;e.after(s)}}))):e.classList.contains("invalid")&&(e.removeAttribute("class"),t.forEach((t=>{t.classList.contains("title")&&t.removeChild(s)})))}))),""===n.value&&(t.forEach((t=>{if(t.classList.contains("description")){if(t.querySelector(".invalid-message"))return;o.textContent="Task description is required",o.classList.add("invalid-message"),n.after(o),n.classList.add("invalid")}})),n.addEventListener("input",(()=>{""===n.value?(n.classList.add("invalid"),t.forEach((t=>{if(t.classList.contains("description")){if(t.querySelector(".invalid-message"))return;n.after(o)}}))):n.classList.contains("invalid")&&(n.removeAttribute("class"),t.forEach((t=>{t.classList.contains("description")&&t.removeChild(o)})))}))),""===i.value&&(t.forEach((t=>{if(t.classList.contains("date")){if(t.querySelector(".invalid-message"))return;a.textContent="Due date is required",a.classList.add("invalid-message"),i.after(a),i.classList.add("invalid")}})),i.addEventListener("input",(()=>{""===i.value?(i.classList.add("invalid"),t.forEach((t=>{if(t.classList.contains("date")){if(t.querySelector(".invalid-message"))return;i.after(a)}}))):i.classList.contains("invalid")&&(i.removeAttribute("class"),t.forEach((t=>{t.classList.contains("date")&&t.removeChild(a)})))})))}function C(){const t=document.getElementById("task-title"),e=document.getElementById("task-description"),n=document.getElementById("task-date");if(""!==t.value&&""!==e.value&&""!==n.value){{const t=new i(y().titleField.value,y().descriptionField.value,y().dateField.value,y().priorityField.value);t.setTaskList(t.title,t.description,t.date,t.priority),console.log("task",t),s(),h(),p=!0}if(p){const t=document.querySelector(".task-list");document.querySelector(".visible-task-info").addEventListener("click",(()=>{!function(t){const e=t.querySelector(".hidden-task");e.clientHeight?(e.style.maxHeight=0,setTimeout((()=>{e.removeAttribute("style")}),300)):(e.style.maxHeight=e.scrollHeight+"px",setTimeout((()=>{e.removeAttribute("style")}),300)),e.classList.toggle("show")}(t)}))}}else b()}function S(){const e=document.querySelectorAll(".addButton"),n=document.querySelector(".project-form");e.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),t.target.classList.contains("project")&&E(),t.target.classList.contains("task")&&C()})),r&&n.addEventListener("keydown",(t=>{"Enter"===t.key&&E()})),u&&t.addEventListener("keydown",(t=>{"Enter"===t.key&&(t.preventDefault(),C())}))}))}function q(){const e=document.querySelectorAll(".cancelButton"),n=document.querySelector(".project-form");e.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),h()})),r&&n.addEventListener("keydown",(t=>{"Escape"===t.key&&h()})),u&&t.addEventListener("keydown",(t=>{"Escape"===t.key&&h()}))}))}function x(t,e){if(t.classList.contains("fa-pencil")){for(let n=0;n<e;n++)t=t.parentNode;return t}for(let n=0;n<e-1;n++)t=t.parentNode;return t}p=0!==l.childNodes.length,c.addEventListener("click",(()=>{c.classList.add("hide"),document.querySelector(".project-list").before(function(){const t=document.createElement("div");t.classList.add("project-form");const e=document.createElement("input");e.setAttribute("id","project-title-input"),e.setAttribute("autocomplete","off"),e.setAttribute("maxlength","12"),e.placeholder="Enter Project Title",setTimeout((()=>{e.focus()}),0);const n=document.createElement("div");n.classList.add("project-form-button");const i=document.createElement("button");i.textContent="Add",i.classList.add("addButton","project");const s=document.createElement("button");return s.textContent="Cancel",s.classList.add("cancelButton"),n.appendChild(i),n.appendChild(s),t.appendChild(e),t.appendChild(n),t}()),r=!0,S(),q()})),d.addEventListener("click",(()=>{document.querySelector("main").appendChild(function(){const t=document.createElement("div");return t.classList.add("popup-field"),t.innerHTML='<form class="task-form">\n    <fieldset>\n        <div class="column-one">\n            <div class="form-element title">\n                <label for="task-title">Title</label>\n                <input id="task-title" autocomplete = "off">\n            </div>\n\n            <div class="form-element description">\n                <label for="task-description">Description</label>\n                <textarea id="task-description"></textarea>\n            </div>\n        </div>\n\n        <div class="column-two">\n            <div class="form-element date">\n                <label for="task-date">Due Date</label>\n                <input id="task-date" type="date">\n            </div>\n\n            <div class="form-element priority">\n                <label for="task-priority">Priority</label>\n                <select id="task-priority">\n                    <option>Low</option>\n                    <option>Medium</option>\n                    <option>High</option>\n                </select>\n            </div>\n        </div>\n\n    </fieldset>\n    <div class="form-button">\n        <button class="cancelButton">Cancel</button>\n        <button class="addButton task">Add Task</button>\n    </div>\n</form>',t}()),u=!0,S(),q()})),new MutationObserver((t=>{t.forEach((t=>{"childList"===t.type&&t.addedNodes.forEach((t=>{t.querySelector(".task-title")&&(t.querySelector(".task-edit-button").addEventListener("click",(t=>{L(t)})),t.querySelector(".task-priority-button").addEventListener("click",(t=>{!function(t){t.stopPropagation()}(t)})),t.querySelector(".task-delete-button").addEventListener("click",(t=>{g(t)})))}))}))})).observe(l,{childList:!0}),new MutationObserver((t=>{t.forEach((t=>{"childList"===t.type&&t.addedNodes.forEach((t=>{t.querySelector(".project-name")&&t.querySelector(".delete-project-button").addEventListener("click",(t=>{g(t)}))}))}))})).observe(a,{childList:!0}),document.querySelector(".inbox-button").addEventListener("click",(()=>{})),document.querySelector(".today-button").addEventListener("click",(()=>{n.textContent="";const t=document.createElement("div");t.classList.add("header");const e=document.createElement("h1");e.textContent="Today",t.appendChild(e),n.appendChild(t)}))}()})();