(()=>{"use strict";const t=JSON.parse(localStorage.getItem("projects"))||[];class e{constructor(t,e){this.title=t,this.task=[e]}setProjectList(e,n){t.unshift({title:e,tasks:n}),localStorage.setItem("projects",JSON.stringify(t))}removeProjectList(e){t.splice(e,1),JSON.parse(localStorage.getItem("projects")).splice(e,1),localStorage.setItem("projects",JSON.stringify(t))}}const n=JSON.parse(localStorage.getItem("tasks"))||[];class o{constructor(t,e,n,o,s){this.title=t,this.description=e,this.date=n,this.priority=o,this.tab=s}setTaskList(t,e,o,s,i){n.unshift({title:t,description:e,date:o,priority:s,tab:i}),localStorage.setItem("tasks",JSON.stringify(n)),console.log(n)}removeTaskList(t){n.splice(t,1);const e=JSON.parse(localStorage.getItem("tasks"));e.splice(t,1),localStorage.setItem("tasks",JSON.stringify(e))}updateTaskList(t,e,o,s,i,a){n[a].title=t,n[a].description=e,n[a].date=o,n[a].priority=s,n[a].tab=i,localStorage.setItem("tasks",JSON.stringify(n))}}function s(){const t=JSON.parse(localStorage.getItem("tasks")),e=document.querySelector(".task-list-container");e.textContent="";for(let n=0;n<t.length;n++){const o=document.createElement("div");o.classList.add("task-list");const s=document.createElement("div");s.classList.add("visible-task-info");const i=document.createElement("div");i.classList.add("task-left");const a=document.createElement("span");a.classList.add("task-title"),a.textContent=t[n].title;const r=document.createElement("div");r.classList.add("task-list-controller");const c=document.createElement("button");c.classList.add("task-edit-button"),c.innerHTML='<i class= "fa-solid fa-pencil"></i>';const l=document.createElement("button");l.innerHTML='<i class="fa-solid fa-flag"></i>',l.classList.add("task-priority-button"),"Low"===t[n].priority?l.style.color="green":"Medium"===t[n].priority?l.style.color="orange":"High"===t[n].priority&&(l.style.color="red");const d=document.createElement("button");d.classList.add("task-delete-button"),d.innerHTML='<i class= "fa-solid fa-trash"></i>';const u=document.createElement("div");u.classList.add("hidden-task");const p=document.createElement("div");p.classList.add("hidden-task-info");const m=document.createElement("div");m.classList.add("task-left-column");const f=document.createElement("div");function y(){const e=document.createElement("div");e.classList.add("task-title-info");const o=document.createElement("span");o.style.fontWeight="bold",o.textContent="Title: ";const s=document.createElement("span");return s.classList.add("task-title"),s.textContent=t[n].title,e.appendChild(o),e.appendChild(s),e}function v(){const e=document.createElement("div");e.classList.add("task-date-info");const o=document.createElement("span");o.style.fontWeight="bold",o.textContent="Date: ";const s=document.createElement("span");return s.classList.add("task-date"),s.textContent=t[n].date,e.appendChild(o),e.appendChild(s),e}function k(){const e=document.createElement("div");e.classList.add("task-description-info");const o=document.createElement("span");o.style.fontWeight="bold",o.textContent="Description: ";const s=document.createElement("span");return s.classList.add("task-description"),s.textContent=t[n].description,e.appendChild(o),e.appendChild(s),e}function g(){const e=document.createElement("div");e.classList.add("task-priority-info");const o=document.createElement("span");o.style.fontWeight="bold",o.textContent="Priority: ";const s=document.createElement("span");return s.classList.add("task-priority"),s.textContent=t[n].priority,e.appendChild(o),e.appendChild(s),e}f.classList.add("task-right-column"),i.appendChild(a),r.append(c,l,d),s.append(i,r),u.appendChild(p),p.append(m,f),m.append(y(),v()),f.append(k(),g()),o.append(s,u),e.appendChild(o)}}function i(){const t=JSON.parse(localStorage.getItem("projects")),e=document.querySelector(".project-list-container");e.textContent="";for(let n=0;n<t.length;n++){const o=document.createElement("div");o.classList.add("project-list");const s=document.createElement("button");s.classList.add("project-name");const i=document.createElement("div");i.classList.add("project-left-side");const a=document.createElement("span");a.innerHTML="<i class = 'fa-solid fa-tasks'></i>";const r=document.createElement("p");r.textContent=t[n].title;const c=document.createElement("div");c.classList.add("project-right-side"),c.innerHTML="<button class = 'delete-project-button'><i class = 'fa-solid fa-times'></i></button>",i.appendChild(a),i.appendChild(r),s.appendChild(i),s.appendChild(c),o.appendChild(s),e.appendChild(o)}}function a(){return document.getElementById("project-title-input")}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function c(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function l(t){c(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"===r(t)&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function d(t){c(1,arguments);var e=l(t);return e.setHours(0,0,0,0),e}function u(t){return c(1,arguments),function(t,e){c(2,arguments);var n=d(t),o=d(e);return n.getTime()===o.getTime()}(t,Date.now())}function p(t){return c(1,arguments),l(t).getTime()>Date.now()}localStorage.getItem("tasks")&&s(),localStorage.getItem("projects")&&i(),function(){const t=document.querySelector("main"),n=document.querySelector(".header"),r=document.querySelector(".header-title"),c=document.querySelector(".project-container"),l=document.querySelector(".task-list-container"),d=document.querySelector(".project-list-container"),m=document.querySelector(".add-project-button"),f=document.querySelector(".add-task-button");let y=!1,v=!1,k=!1,g=!1;function L(){const e=document.createElement("div");return e.classList.add("error-message"),{emptyMessage:function(){e.textContent="Project title cannot be empty",t.appendChild(e)},lengthyMessage:function(){e.textContent="Project title cannot be longer than 12 characters",t.appendChild(e)}}}function h(){const e=document.querySelector(".error-message");t.removeChild(e)}function b(){const t=document.getElementById("project-title-input");if(""===t.value)return void function(){const t=document.getElementById("project-title-input");t.classList.add("invalid"),L().emptyMessage(),setTimeout(h,3e3),t.addEventListener("input",(()=>{""===t.value?t.classList.add("invalid"):""!==t.value&&t.classList.remove("invalid")}))}();if(t.value.length>12)return L().lengthyMessage(),setTimeout(h,3e3),a().addEventListener("input",(()=>{a().value.length<=12?a().classList.remove("invalid"):a().value.length>12&&a().classList.add("invalid")})),void a().classList.add("invalid");const n=new e(t.value);n.setProjectList(n.title),i(),j()}function E(){return{titleField:document.getElementById("task-title"),descriptionField:document.getElementById("task-description"),dateField:document.getElementById("task-date"),priorityField:document.getElementById("task-priority")}}function S(t){return{taskTitle:N(t.target,4).querySelector(".task-title"),secondTaskName:N(t.target,4).querySelector(".hidden-task-info .task-title"),taskDescription:N(t.target,4).querySelector(".task-description"),taskDate:N(t.target,4).querySelector(".task-date"),taskPriority:N(t.target,4).querySelector(".task-priority")}}function C(t){document.querySelector("main").appendChild(function(){const t=document.createElement("div");return t.classList.add("popup-field"),t.innerHTML='<form class="edit-form">\n    <fieldset>\n        <div class="column-one">\n            <div class="form-element title">\n                <label for="task-title">Title</label>\n                <input id="task-title" autocomplete = "off">\n            </div>\n\n            <div class="form-element description">\n                <label for="task-description">Description</label>\n                <textarea id="task-description"></textarea>\n            </div>\n        </div>\n\n        <div class="column-two">\n            <div class="form-element date">\n                <label for="task-date">Due Date</label>\n                <input id="task-date" type="date">\n            </div>\n\n            <div class="form-element priority">\n                <label for="task-priority">Priority</label>\n                <select id="task-priority">\n                    <option>Low</option>\n                    <option>Medium</option>\n                    <option>High</option>\n                </select>\n            </div>\n        </div>\n\n    </fieldset>\n    <div class="form-button">\n        <button class="cancelButton">Cancel</button>\n        <button class="updateButton">Update Task</button>\n    </div>\n</form>',t}()),function(t){const e=document.querySelector(".updateButton"),n=E().titleField,s=E().descriptionField,i=E().dateField,a=E().priorityField,r=S(t).taskTitle,c=S(t).secondTaskName,l=S(t).taskDescription,d=S(t).taskDate,m=S(t).taskPriority,f=Array.from(document.querySelectorAll(".task-list-container .task-list")).indexOf(N(t.target,4)),y=N(t.target,2).querySelector(".task-priority-button");e.addEventListener("click",(t=>{if(t.preventDefault(),""===n.value||""===s.value||""===i.value)return void w();r.textContent=n.value,c.textContent=n.value,l.textContent=s.value,d.textContent=i.value,m.textContent=a.value,"Low"===a.value?y.style.color="green":"Medium"===a.value?y.style.color="orange":y.style.color="red";const e=d.textContent.split("-")[0],v=parseFloat(d.textContent.split("-")[1])-1,k=d.textContent.split("-")[2],g=u(new Date(e,v,k)),L=p(new Date(e,v,k));let h;h=g?"today":L?"upcoming":"inbox",(new o).updateTaskList(r.textContent,l.textContent,d.textContent,m.textContent,h,f),j()}))}(t),A(),function(t){E().titleField.value=N(t.target,4).querySelector(".task-title").textContent,E().descriptionField.value=N(t.target,4).querySelector(".task-description").textContent,E().dateField.value=N(t.target,4).querySelector(".task-date").textContent,E().priorityField.value=N(t.target,4).querySelector(".task-priority").textContent,k=!0,t.stopPropagation()}(t)}function q(t){t.stopPropagation()}function x(t){let n,s;function i(){const t=document.querySelectorAll(".task-list-container > .task-list"),e=[].indexOf.call(t,n);(new o).removeTaskList(e),l.removeChild(n)}function a(){const t=document.querySelectorAll(".project-list-container > .project-list"),n=[].indexOf.call(t,s);(new e).removeProjectList(n),d.removeChild(s)}t.target.classList.contains("fa-trash")?(n=N(t.target,5),i()):t.target.classList.contains("task-delete-button")&&(n=N(t.target,4),i()),t.target.classList.contains("fa-times")?(s=N(t.target,5),a()):t.target.classList.contains("delete-project-button")&&(s=N(t.target,4),a()),t.stopPropagation()}function j(){if(y){const t=document.querySelector(".project-form");y=!1,t.removeEventListener("keydown",D),m.classList.remove("hide"),c.removeChild(t)}if(v||k){const t=document.querySelector("main"),e=document.querySelector(".popup-field");v=!1,k=!1,t.removeChild(e)}}function w(){const t=document.querySelectorAll(".form-element"),e=document.getElementById("task-title"),n=document.getElementById("task-description"),o=document.getElementById("task-date"),s=document.createElement("span"),i=document.createElement("span"),a=document.createElement("span");""===e.value&&(t.forEach((t=>{if(t.classList.contains("title")){if(t.querySelector(".invalid-message"))return;s.textContent="Task title is required",s.classList.add("invalid-message"),e.after(s),e.classList.add("invalid")}})),e.addEventListener("input",(()=>{""===e.value?(e.classList.add("invalid"),t.forEach((t=>{if(t.classList.contains("title")){if(t.querySelector(".invalid-message"))return;e.after(s)}}))):e.classList.contains("invalid")&&(e.removeAttribute("class"),t.forEach((t=>{t.classList.contains("title")&&t.removeChild(s)})))}))),""===n.value&&(t.forEach((t=>{if(t.classList.contains("description")){if(t.querySelector(".invalid-message"))return;i.textContent="Task description is required",i.classList.add("invalid-message"),n.after(i),n.classList.add("invalid")}})),n.addEventListener("input",(()=>{""===n.value?(n.classList.add("invalid"),t.forEach((t=>{if(t.classList.contains("description")){if(t.querySelector(".invalid-message"))return;n.after(i)}}))):n.classList.contains("invalid")&&(n.removeAttribute("class"),t.forEach((t=>{t.classList.contains("description")&&t.removeChild(i)})))}))),""===o.value&&(t.forEach((t=>{if(t.classList.contains("date")){if(t.querySelector(".invalid-message"))return;a.textContent="Due date is required",a.classList.add("invalid-message"),o.after(a),o.classList.add("invalid")}})),o.addEventListener("input",(()=>{""===o.value?(o.classList.add("invalid"),t.forEach((t=>{if(t.classList.contains("date")){if(t.querySelector(".invalid-message"))return;o.after(a)}}))):o.classList.contains("invalid")&&(o.removeAttribute("class"),t.forEach((t=>{t.classList.contains("date")&&t.removeChild(a)})))})))}function T(){const t=document.getElementById("task-title"),e=document.getElementById("task-description"),n=document.getElementById("task-date");if(""!==t.value&&""!==e.value&&""!==n.value){const t=n.value.split("-")[0],e=parseFloat(n.value.split("-")[1])-1,i=n.value.split("-")[2],a=u(new Date(t,e,i)),r=p(new Date(t,e,i));let c;c=a?"today":r?"upcoming":"inbox";const l=new o(E().titleField.value,E().descriptionField.value,E().dateField.value,E().priorityField.value,c);l.setTaskList(l.title,l.description,l.date,l.priority,l.tab),s(),j(),g=!0}else w()}function I(t){const e=t.querySelector(".hidden-task");e.clientHeight?(e.style.maxHeight=0,setTimeout((()=>{e.removeAttribute("style")}),300)):(e.style.maxHeight=e.scrollHeight+"px",setTimeout((()=>{e.removeAttribute("style")}),300)),e.classList.toggle("show")}function D(){const e=document.querySelectorAll(".addButton"),n=document.querySelector(".project-form");e.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),t.target.classList.contains("project")&&b(),t.target.classList.contains("task")&&T()})),y&&n.addEventListener("keydown",(t=>{"Enter"===t.key&&b()})),v&&t.addEventListener("keydown",(t=>{"Enter"===t.key&&(t.preventDefault(),T())}))}))}function A(){const e=document.querySelectorAll(".cancelButton"),n=document.querySelector(".project-form");e.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),j()})),y&&n.addEventListener("keydown",(t=>{"Escape"===t.key&&j()})),v&&t.addEventListener("keydown",(t=>{"Escape"===t.key&&j()}))}))}function N(t,e){if(t.classList.contains("fa-pencil")){for(let n=0;n<e;n++)t=t.parentNode;return t}for(let n=0;n<e-1;n++)t=t.parentNode;return t}g=0!==l.childNodes.length,m.addEventListener("click",(()=>{m.classList.add("hide"),document.querySelector(".project-list-container").before(function(){const t=document.createElement("div");t.classList.add("project-form");const e=document.createElement("input");e.setAttribute("id","project-title-input"),e.setAttribute("autocomplete","off"),e.setAttribute("maxlength","12"),e.placeholder="Enter Project Title",setTimeout((()=>{e.focus()}),0);const n=document.createElement("div");n.classList.add("project-form-button");const o=document.createElement("button");o.textContent="Add",o.classList.add("addButton","project");const s=document.createElement("button");return s.textContent="Cancel",s.classList.add("cancelButton"),n.appendChild(o),n.appendChild(s),t.appendChild(e),t.appendChild(n),t}()),y=!0,D(),A()})),f.addEventListener("click",(()=>{document.querySelector("main").appendChild(function(){const t=document.createElement("div");return t.classList.add("popup-field"),t.innerHTML='<form class="task-form">\n    <fieldset>\n        <div class="column-one">\n            <div class="form-element title">\n                <label for="task-title">Title</label>\n                <input id="task-title" autocomplete = "off">\n            </div>\n\n            <div class="form-element description">\n                <label for="task-description">Description</label>\n                <textarea id="task-description"></textarea>\n            </div>\n        </div>\n\n        <div class="column-two">\n            <div class="form-element date">\n                <label for="task-date">Due Date</label>\n                <input id="task-date" type="date">\n            </div>\n\n            <div class="form-element priority">\n                <label for="task-priority">Priority</label>\n                <select id="task-priority">\n                    <option>Low</option>\n                    <option>Medium</option>\n                    <option>High</option>\n                </select>\n            </div>\n        </div>\n\n    </fieldset>\n    <div class="form-button">\n        <button class="cancelButton">Cancel</button>\n        <button class="addButton task">Add Task</button>\n    </div>\n</form>',t}()),function(){const t=document.querySelector(".project-list-container"),e=document.querySelector(".task-form > fieldset > .column-two"),n=document.createElement("div");n.classList.add("form-element","project");const o=document.createElement("label");o.setAttribute("for","task-project"),o.textContent="Project";const s=document.createElement("select");s.setAttribute("id","task-project"),s.add(new Option("Inbox")),t.querySelector(".project-list")&&document.querySelectorAll(".project-list").forEach((t=>{const e=t.querySelector("p");s.add(new Option(e.textContent))})),n.append(o,s),e.appendChild(n)}(),v=!0,D(),A()})),new MutationObserver((t=>{t.forEach((t=>{"childList"===t.type&&t.addedNodes.forEach((t=>{t.querySelector(".task-title")&&(t.querySelector(".visible-task-info").addEventListener("click",(e=>{I(t),e.stopPropagation()})),t.querySelector(".task-edit-button").addEventListener("click",(t=>{C(t)})),t.querySelector(".task-priority-button").addEventListener("click",(t=>{q(t)})),t.querySelector(".task-delete-button").addEventListener("click",(t=>{x(t)})))}))}))})).observe(l,{childList:!0}),l.querySelector(".task-list")&&document.querySelectorAll(".task-list").forEach((t=>{t.querySelector(".visible-task-info").addEventListener("click",(e=>{I(t),e.stopPropagation()})),t.querySelector(".task-edit-button").addEventListener("click",(t=>{C(t),t.stopPropagation()})),t.querySelector(".task-priority-button").addEventListener("click",(t=>{q(t)})),t.querySelector(".task-delete-button").addEventListener("click",(t=>{x(t),t.stopPropagation()}))})),new MutationObserver((t=>{t.forEach((t=>{"childList"===t.type&&t.addedNodes.forEach((t=>{t.querySelector(".project-name")&&t.querySelector(".delete-project-button").addEventListener("click",(t=>{x(t)}))}))}))})).observe(d,{childList:!0}),c.querySelector(".project-list")&&document.querySelectorAll(".project-list").forEach((t=>{t.querySelector(".delete-project-button").addEventListener("click",(t=>{x(t)}))})),document.querySelector(".inbox-button").addEventListener("click",(()=>{s(),r.textContent="Inbox",document.querySelector(".add-task-button")||n.appendChild(f)})),document.querySelector(".today-button").addEventListener("click",(()=>{const t=document.createElement("p");t.textContent="No tasks for today",r.textContent="Today",s(),l.appendChild(t),document.querySelector(".add-task-button")&&n.removeChild(f);const e=JSON.parse(localStorage.getItem("tasks")),o=Array.from(document.querySelectorAll(".task-list-container .task-list"));for(let n=0;n<e.length;n++){if("today"!==e[n].tab){const t=o[n];t&&(t.style.display="none")}l.querySelector(".task-list")&&l.contains(t)&&l.removeChild(t)}})),document.querySelector(".upcoming-button").addEventListener("click",(()=>{const t=document.createElement("p");t.textContent="No upcoming tasks",r.textContent="Upcoming",s(),l.appendChild(t),document.querySelector(".add-task-button")&&n.removeChild(f);const e=JSON.parse(localStorage.getItem("tasks")),o=Array.from(document.querySelectorAll(".task-list-container .task-list"));for(let n=0;n<e.length;n++){if("upcoming"!==e[n].tab){const t=o[n];t&&(t.style.display="none")}l.querySelector(".task-list")&&l.contains(t)&&l.removeChild(t)}}))}()})();